(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7635"],{7732:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-form",{ref:"queryParamsForm",attrs:{model:e.queryParams,inline:""}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),l("el-form-item",{attrs:{label:"生产日期"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.queryParams.productionDate,callback:function(t){e.$set(e.queryParams,"productionDate",t)},expression:"queryParams.productionDate"}})],1),l("el-form-item",{attrs:{label:"保质期"}},[l("el-input",{attrs:{type:"number"},model:{value:e.queryParams.shelfLife,callback:function(t){e.$set(e.queryParams,"shelfLife",t)},expression:"queryParams.shelfLife"}})],1),l("el-form-item",{attrs:{label:"上架日期"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.queryParams.shelfDate,callback:function(t){e.$set(e.queryParams,"shelfDate",t)},expression:"queryParams.shelfDate"}})],1),l("el-form-item",{attrs:{label:"价格"}},[l("el-input",{attrs:{type:"number"},model:{value:e.queryParams.price,callback:function(t){e.$set(e.queryParams,"price",t)},expression:"queryParams.price"}})],1),l("el-form-item",{attrs:{label:"库存"}},[l("el-input",{attrs:{type:"number"},model:{value:e.queryParams.stock,callback:function(t){e.$set(e.queryParams,"stock",t)},expression:"queryParams.stock"}})],1),l("el-form-item",{attrs:{label:"供应商"}},[l("el-input",{model:{value:e.queryParams.supplier,callback:function(t){e.$set(e.queryParams,"supplier",t)},expression:"queryParams.supplier"}})],1),l("el-form-item",{attrs:{label:"打折"}},[l("el-input",{attrs:{type:"number"},model:{value:e.queryParams.sale,callback:function(t){e.$set(e.queryParams,"sale",t)},expression:"queryParams.sale"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1),l("el-form-item",[e.isNotNormalUser?l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("增加")]):e._e()],1)],1),e.isNotNormalUser?l("el-dialog",{attrs:{title:"增加蔬菜",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("el-form",{ref:"vegetableForm",attrs:{model:e.vegetable,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"蔬菜名称",prop:"name"}},[l("el-input",{attrs:{placeholder:"请输入蔬菜名称"},model:{value:e.vegetable.name,callback:function(t){e.$set(e.vegetable,"name",t)},expression:"vegetable.name"}})],1),l("el-form-item",{attrs:{label:"描述",prop:"description"}},[l("el-input",{attrs:{placeholder:"请输入蔬菜描述"},model:{value:e.vegetable.description,callback:function(t){e.$set(e.vegetable,"description",t)},expression:"vegetable.description"}})],1),l("el-form-item",{attrs:{label:"单位",prop:"unit"}},[l("el-input",{attrs:{placeholder:"请输入单位"},model:{value:e.vegetable.unit,callback:function(t){e.$set(e.vegetable,"unit",t)},expression:"vegetable.unit"}})],1),l("el-form-item",{attrs:{label:"生产日期",prop:"productionDate"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择生产日期"},model:{value:e.vegetable.productionDate,callback:function(t){e.$set(e.vegetable,"productionDate",t)},expression:"vegetable.productionDate"}})],1),l("el-form-item",{attrs:{label:"保质期",prop:"shelfLife"}},[l("el-input",{attrs:{placeholder:"请输入保质期"},model:{value:e.vegetable.shelfLife,callback:function(t){e.$set(e.vegetable,"shelfLife",t)},expression:"vegetable.shelfLife"}})],1),l("el-form-item",{attrs:{label:"上架日期",prop:"shelfDate"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择上架日期"},model:{value:e.vegetable.shelfDate,callback:function(t){e.$set(e.vegetable,"shelfDate",t)},expression:"vegetable.shelfDate"}})],1),l("el-form-item",{attrs:{label:"价格",prop:"price"}},[l("el-input",{attrs:{placeholder:"请输入价格"},model:{value:e.vegetable.price,callback:function(t){e.$set(e.vegetable,"price",t)},expression:"vegetable.price"}})],1),l("el-form-item",{attrs:{label:"库存",prop:"stock"}},[l("el-input",{attrs:{placeholder:"请输入库存"},model:{value:e.vegetable.stock,callback:function(t){e.$set(e.vegetable,"stock",t)},expression:"vegetable.stock"}})],1),l("el-form-item",{attrs:{label:"供应商",prop:"supplier"}},[l("el-input",{attrs:{placeholder:"请输入供应商"},model:{value:e.vegetable.supplier,callback:function(t){e.$set(e.vegetable,"supplier",t)},expression:"vegetable.supplier"}})],1),l("el-form-item",{attrs:{label:"折扣",prop:"sale"}},[l("el-input",{attrs:{placeholder:"请输入折扣（0~10折）"},model:{value:e.vegetable.sale,callback:function(t){e.$set(e.vegetable,"sale",t)},expression:"vegetable.sale"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1):e._e(),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[l("el-table-column",{attrs:{align:"center",label:"ID",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.id)+" ")]}}])}),l("el-table-column",{attrs:{align:"center",label:"名称",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),l("el-table-column",{attrs:{label:"描述",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.description)+" ")]}}])}),l("el-table-column",{attrs:{label:"单位",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.unit)+" ")]}}])}),l("el-table-column",{attrs:{label:"生产日期",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.productionDate)+" ")]}}])}),l("el-table-column",{attrs:{label:"保质期",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.shelfLife)+" ")]}}])}),l("el-table-column",{attrs:{label:"上架日期",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.shelfDate)+" ")]}}])}),l("el-table-column",{attrs:{label:"价格",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e.isVIP?[l("span",{staticStyle:{"text-decoration":"line-through",color:"grey"}},[e._v(e._s(t.row.price))]),l("br"),e._v(" "+e._s((t.row.price*(t.row.sale/10)).toFixed(2))+" ")]:void 0}}],null,!0)}),l("el-table-column",{attrs:{label:"库存",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.stock)+" ")]}}])}),l("el-table-column",{attrs:{label:"供应商",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.supplier)+" ")]}}])}),l("el-table-column",{attrs:{label:"折扣",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.sale)+" ")]}}])}),e.isNotNormalUser?l("el-table-column",{attrs:{label:"删除",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"danger"},on:{click:function(l){return e.deleteVegetable(t.row.id)}}},[l("i",{staticClass:"el-icon-close"})])]}}],null,!1,4137363820)}):e._e()],1),l("div",{staticClass:"block"},[l("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[10,20,30,40],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},s=[],r=l("5530"),i=(l("d3b7"),l("b0c0"),l("a4d3"),l("e01a"),l("a78e")),n=l.n(i),o=l("bc3a").default,u={filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},computed:{isNotNormalUser:function(){var e=n.a.get("level");return console.log(e),parseInt(e)>=3},isVIP:function(){var e=n.a.get("level");return console.log(e),parseInt(e)>=2}},data:function(){return{list:null,listLoading:!0,total:0,currentPage:1,pageSize:10,queryParams:{name:null,productionDate:null,shelfLife:null,shelfDate:null,price:null,stock:null,supplier:null,sale:null,currentPage:null,pageSize:null},dialogVisible:!1,vegetable:{name:null,description:null,unit:null,productionDate:null,shelfLife:null,shelfDate:null,price:null,stock:null,supplier:null,sale:null}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0;var t="https://ajie.cool/api/vegetable",l={currentPage:this.currentPage,pageSize:this.pageSize},a=n.a.get("userId"),s=n.a.get("token"),i={"user-id":a,"session-token":s},u=Object(r["a"])({},this.queryParams);console.log(u),console.log(o),o.post(t,u,{headers:i,params:l}).then((function(t){e.list=t.data.list,e.total=t.data.total})).catch((function(e){console.error("Error fetching data:",e)})).finally((function(){e.listLoading=!1}))},search:function(){this.fetchData()},handleSizeChange:function(e){console.log("size",e),this.pageSize=e,this.fetchData()},handleCurrentChange:function(e){console.log("current",e),this.currentPage=e,this.fetchData()},deleteVegetable:function(e){var t=this;console.log(e),this.listLoading=!0;var l="https://ajie.cool/api/vegetable/delete",a=n.a.get("userId"),s=n.a.get("token"),r={"user-id":a,"session-token":s},i={id:e};o.post(l,i,{headers:r}).then((function(e){t.$message.success(e.data)})).catch((function(e){t.$message.error(e),console.log(e)})).finally((function(){t.listLoading=!1,t.fetchData()}))},handleSubmit:function(){var e=this;if(this.vegetable.name)if(this.vegetable.description)if(null!==this.vegetable.unit)if(this.vegetable.productionDate)if(null!==this.vegetable.shelfLife)if(this.vegetable.shelfDate)if(null!==this.vegetable.price)if(null!==this.vegetable.stock)if(this.vegetable.supplier)if(null!==this.vegetable.sale){var t={name:this.vegetable.name,description:this.vegetable.description,unit:this.vegetable.unit,productionDate:this.vegetable.productionDate,shelfLife:this.vegetable.shelfLife,shelfDate:this.vegetable.shelfDate,price:this.vegetable.price,stock:this.vegetable.stock,supplier:this.vegetable.supplier,sale:this.vegetable.sale};console.log(t);var l=n.a.get("userId"),a=n.a.get("token"),s={"user-id":l,"session-token":a};o.post("https://ajie.cool/api/vegetable/insert",t,{headers:s}).then((function(t){console.log(t),e.$message.success("蔬菜添加成功"),e.dialogVisible=!1,e.fetchData()})).catch((function(t){e.$message.error("蔬菜添加失败"),console.error(t)}))}else this.$message.error("蔬菜折扣不能为空");else this.$message.error("蔬菜供应商不能为空");else this.$message.error("蔬菜库存不能为空");else this.$message.error("蔬菜价格不能为空");else this.$message.error("蔬菜上架日期不能为空");else this.$message.error("蔬菜保质期不能为空");else this.$message.error("蔬菜生产日期不能为空");else this.$message.error("蔬菜单位不能为空");else this.$message.error("蔬菜描述不能为空");else this.$message.error("蔬菜名称不能为空")}}},c=u,p=l("2877"),d=Object(p["a"])(c,a,s,!1,null,null,null);t["default"]=d.exports}}]);