(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a2daa75"],{2872:function(e,t,a){"use strict";a("dc66")},ba0e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"头像URL"}},[a("el-input",{model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}})],1)],1),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"生日"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"Pick a date"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",t)},expression:"form.phoneNumber"}})],1),a("el-form-item",[a("el-button",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("修改密码")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("修 改")])],1)],1),a("el-dialog",{attrs:{title:"修改密码",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"pwdForm",attrs:{model:e.user,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"原密码",prop:"originPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入原密码"},model:{value:e.pwd.origin,callback:function(t){e.$set(e.pwd,"origin",t)},expression:"pwd.origin"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newPssword"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.pwd.new,callback:function(t){e.$set(e.pwd,"new",t)},expression:"pwd.new"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入新密码"},model:{value:e.pwd.confirmNew,callback:function(t){e.$set(e.pwd,"confirmNew",t)},expression:"pwd.confirmNew"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handlePasswordChange}},[e._v("确 定")])],1)],1)],1)},o=[],s=a("a78e"),i=a.n(s),n=a("bc3a"),l=a.n(n),d={data:function(){return{form:{avatar:"",gender:"男",email:"",birthday:null,phoneNumber:""},pwd:{origin:"",new:"",confirmNew:""},dialogVisible:!1}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this,t={"user-id":i.a.get("userId"),"session-token":i.a.get("token")};l.a.post("https://ajie.cool/api/info",{},{headers:t}).then((function(t){t.data.gender=!1===t.data.gender?"女":"男",e.form=t.data})).catch((function(e){console.error("Error fetching data:",e)}))},handleSubmit:function(){var e=this,t={gender:"女"!==this.form.gender,email:this.form.email,avatar:this.form.avatar,phoneNumber:this.form.phoneNumber,birthday:this.form.birthday},a=i.a.get("userId"),r=i.a.get("token"),o={"user-id":a,"session-token":r};l.a.post("https://ajie.cool/api/change-info",t,{headers:o}).then((function(t){e.$message.success("修改成功"),e.fetchData()})).catch((function(t){e.$message.error(t),console.error(t)}))},handlePasswordChange:function(){var e=this;if(""!==this.pwd.origin)if(this.pwd.origin.length<6)this.$message.error("原密码少于6位");else if(""!==this.pwd.new)if(this.pwd.new.length<6)this.$message.error("新密码少于6位");else if(this.pwd.new===this.pwd.confirmNew){var t={originPassword:this.pwd.origin,newPassword:this.pwd.new},a=i.a.get("userId"),r=i.a.get("token"),o={"user-id":a,"session-token":r};l.a.post("https://ajie.cool/api/change-password",t,{headers:o}).then((function(t){console.log(t.data),100===t.data?e.$message.error("原密码错误"):200===t.data?(e.$message.success("修改成功"),e.dialogVisible=!1):e.$message.error("修改失败")})).catch((function(t){e.$message.error(t),console.error(t)}))}else this.$message.error("两次输入的密码不一致");else this.$message.error("新密码不能为空");else this.$message.error("原密码不能为空")}}},c=d,m=(a("2872"),a("2877")),f=Object(m["a"])(c,r,o,!1,null,"dee9ac40",null);t["default"]=f.exports},dc66:function(e,t,a){}}]);